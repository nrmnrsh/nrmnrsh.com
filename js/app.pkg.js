!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Action=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"run",value:function(){var t=document,e=t.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-17711526-1",this._setup(),t.head.appendChild(e)}},{key:"_setup",value:function(){var t=window;t.dataLayer=t.dataLayer||[],t.gtag=function(){t.dataLayer.push(arguments)},t.gtag("js",new Date),t.gtag("config","UA-17711526-1",{anonymize_ip:!0})}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(r):void 0},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=new WeakMap,h=function(){function t(){f(this,t),l.set(this,{})}return u(t,[{key:"on",value:function(t,e){var n=l.get(this);return n[t]=n[t]||[],n[t].push(e),this}},{key:"off",value:function(t,e){var n=l.get(this);return n[t]?(n[t]=e?n[t].filter(function(t){return t!==e}):[],this):this}},{key:"trigger",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=l.get(this);return r[t]&&r[t].forEach(function(r){return r.call(null,{sender:e,type:t,data:n})}),this}}]),t}(),p=new WeakMap,v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t=i({},n.defaults,t);var r=new Proxy(t,{set:function(t,e,r){var o=t[e]!==r;return t[e]=r,o&&n.trigger("change",{prop:e,value:r}),!0}});return p.set(n,r),n}return s(e,h),u(e,[{key:"defaults",get:function(){return null}},{key:"props",get:function(){return p.get(this)}}]),e}(),y=new WeakMap,g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=function(t){return t instanceof v?t:new n.Model(t)},o={get:function(t,e){var o=t[e];return"function"==typeof o?function(){for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];var a,s=!1;switch(e){case"pop":case"reverse":case"shift":case"sort":s=!0;break;case"fill":s=!0,u[0]=r(u[0]);break;case"push":case"unshift":s=!0,u=u.map(r);break;case"splice":s=!0,u=u.map(function(t,e){return e>1?r(t):t})}return a=o.apply(t,u),s&&n.trigger("change",{method:e}),a}:o}},i=new Proxy(t.map(r),o);return y.set(n,i),n}return s(e,h),u(e,[{key:"Model",get:function(){return v}},{key:"models",get:function(){return y.get(this)}}]),e}(),d=new WeakMap,b=function(){function t(e){f(this,t);var n={context:e,register:{}};d.set(this,n)}return u(t,[{key:"add",value:function(t,e){return d.get(this).register[t]=e,this}},{key:"remove",value:function(t){var e=d.get(this).register;return e[t]=void 0,delete e[t],this}},{key:"get",value:function(t){return d.get(this).register[t]}},{key:"has",value:function(t){return!!this.get(t)}}]),t}(),_=function(t){function e(t){f(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=d.get(n),o=r.register;return r.onAction=function(e){var n=e.type,r=o[n];r&&r.forEach(function(n){var r=new n;r.context=t,r.event=e,r.run()})},n}return s(e,b),u(e,[{key:"add",value:function(t,n){var r=d.get(this),i=r.context,u=r.onAction,c=this.get(t);return c||i.on(t,u),n=(c||[]).concat(n),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,n)}},{key:"remove",value:function(t,n){var r=this.get(t);if(r&&r.length){if(!n)return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this,t);if(n instanceof Array||(n=[n]),n.forEach(function(t){for(var e=r.indexOf(t);e>-1;)r.splice(e,1),e=r.indexOf(t)}),0===r.length)return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this,t)}return this}}]),e}(),w=function(t){function e(){f(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return d.set(t,{actions:new _(t),values:new b(t)}),t}return s(e,h),u(e,[{key:"actions",get:function(){return d.get(this).actions}},{key:"values",get:function(){return d.get(this).values}}]),e}();function k(t){return"boolean"==typeof t&&!t}var m=function(){function t(){f(this,t)}return u(t,[{key:"run",value:function(){var t=this,e=function(t){var e=t.settings;if(!e||"object"!==(void 0===e?"undefined":r(e)))throw new Error("Define settings object");if(!e.view)throw new Error("Define a view");if(!e.selector)throw new Error("Define a selector");if(!e.namespace)throw new Error("Define a namespace");return e}(this),n=this.context,o=this.event.data,u=n.values.get(e.namespace)||[],a=o&&o.root?o.root:document.body;k(this.beforeAll())||([].concat(c(a.querySelectorAll(e.selector))).forEach(function(r,o){if(!u.some(function(t){return t.el==r})){var c=i({el:r,context:n},e.params),a=null;k(t.beforeEach(c,r,o))||((a=new e.view(c)).render(),k(t.afterEach(a,r,o))||u.push(a))}}),u.length>0&&n.values.add(e.namespace,u),this.afterAll(u))}},{key:"beforeAll",value:function(){}},{key:"beforeEach",value:function(){}},{key:"afterEach",value:function(){}},{key:"afterAll",value:function(){}},{key:"settings",get:function(){return null}}]),t}();var O=function(){function t(){f(this,t),this._onIntersect=this._onIntersect.bind(this)}return u(t,[{key:"run",value:function(){var t=function(t){var e=t.settings;if(!e||"object"!==(void 0===e?"undefined":r(e)))throw new Error("Define settings object");if(!e.selector)throw new Error("Define a selector");return e}(this);this._lookup(t.selector)}},{key:"_lookup",value:function(t){var e=this.event.data,n=(e&&e.root?e.root:document.body).querySelectorAll(t);0!==n.length&&(window.IntersectionObserver?this._observe(n):this._fetch())}},{key:"_observe",value:function(t){var e=this;this._observer=new window.IntersectionObserver(this._onIntersect,this.observerSettings),[].concat(c(t)).forEach(function(t){return e._observer.observe(t)})}},{key:"_disconnect",value:function(){this._observer.disconnect(),this._observer=null}},{key:"_fetch",value:function(){var t=this,e=this.event;this.import.then(function(n){var r=n.Action||n.default,o=null;if(!r)throw o=new Error("Module must export Action or default"),t.context.trigger(t.event.type+":error",{error:o}),o;if("function"!=typeof r.prototype.run)throw o=new Error("Module must be an Action"),t.context.trigger(t.event.type+":error",{error:o}),o;t.context.actions.add(e.type,r).remove(e.type,t.constructor),t._execute(r)})}},{key:"_execute",value:function(t){var e=new t;e.context=this.context,e.event=this.event,e.run()}},{key:"_onIntersect",value:function(t){t.some(function(t){return t.isIntersecting})&&(this._disconnect(),this._fetch())}},{key:"settings",get:function(){return null}},{key:"import",get:function(){return null}},{key:"observerSettings",get:function(){return{rootMargin:"0px",threshold:[0,.5,1]}}}]),t}(),x=function(t){function e(t){f(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.options=t,n.context=t.context,n.el=t.el,n}return s(e,h),u(e,[{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.options=null,this.context=null,this.el=null,this}}]),e}();e.Collection=g,e.Context=w,e.EventEmitter=h,e.Initialize=m,e.InitializeLazy=O,e.Model=v,e.View=x},function(t,e,n){"use strict";var r=n(2),o=n(1),i=new r.Context;i.actions.add("app:run",[o.Action]),i.trigger("app:run"),window.nrmnrsh={context:i}}]);